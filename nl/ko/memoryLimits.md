---

copyright:
  years: 2015, 2017
lastupdated: "2017-04-18"

---

{:new_window: target="_blank"}
{:codeblock: .codeblock}

# 메모리 제한 및 Liberty 빌드팩
{: #memory_limits}

Liberty 빌드팩을 사용하여 애플리케이션을 배치할 때 메모리 제한을 지정해야 합니다.

## 문제점 방지

Liberty 빌드팩을 통해 256MB 메모리 제한으로 배치되는 "Hello World" 서블릿이 올바르게 배치되고 실행되지 않을 수 있습니다. 이 서블릿이 배치되는 경우, 256MB 제한에 근접한 상태로 실행됩니다. 간단한 애플리케이션에도 최소 512MB의 메모리 제한을 지정하십시오.

## 메모리 제한 및 Liberty 빌드팩
{: #memory_limits_and_liberty}


Liberty 빌드팩을 사용하여 애플리케이션을 배치하면 "메모리 제한"을 묻는 메시지가 나타납니다.

지정할 메모리 제한을 결정하려면 지정하는 것이 Java 애플리케이션 힙의 크기가 아님을 인지하는 것이 중요합니다. 전체 프로세스에서 사용할 수 있는 메모리의 크기를 지정하는 것입니다. 이 크기에는 다음 컴포넌트에 사용되는 메모리가 포함됩니다.

* warden 컨테이너에 사용되는 메모리.
* 커널 확장기능과 시스템 라이브러리를 프로세스에 맵핑하는 데 사용되는 메모리.
* jvm 실행 파일, jvm 작업 힙, jit 영역 및 압축된 참조에 사용되는 메모리.
* 클래스(애플리케이션 서버 및 애플리케이션), 스레드 스택 및 직접 io 버퍼에 사용되는 메모리.
* Java 애플리케이션 힙에 사용되는 메모리.

JVM 메모리 사용에 대한 자세한 정보는 developerWorks 문서 [Thanks for the memory](http://www.ibm.com/developerworks/library/j-nativememory-linux/)에 있습니다. 

애플리케이션을 배치할 때 전체 프로세스의 메모리 사용량이 모니터링됩니다. 메모리 사용량이 애플리케이션 배치 시 사용자가 지정한 메모리 제한을 초과하는 경우, 커널에서 프로세스가 중지됩니다. 이 조치는 경고 없이 발생하므로 다음과 같은 방법으로 알 수 있습니다. 

* 애플리케이션을 배치하는 동안 메모리 제한을 초과하면 오류가 발생했다는 메시지가 표시됩니다. 애플리케이션이 불안정하게 작동하는 것을 느낄 수 있습니다. 애플리케이션에서 여러 차례 시작하려고 시도했지만 항상 실패하는 경우도 있습니다. 또는, 애플리케이션 배치에 실패했다는 메시지가 표시되기도 합니다.
* 애플리케이션이 제공되고 있는 동안 메모리 제한을 초과하면 프로세스가 중지됩니다. Cloud Foundry에서 애플리케이션을 다시 시작하려고 시도합니다. 애플리케이션이 다시 시작될 수 있지만 일정 시간 동안 사용 불가능합니다.

## 힙 메모리 지정
{: #specifying_heap_memory}

다양한 방법으로 애플리케이션에 할당된 최대 힙 메모리 양을 사용자 정의할 수 있습니다.

*  JVM_ARGS 환경 변수 및 -Xmx 인수를 사용하십시오. 예를 들어, 최대 힙 크기를 512M으로 설정하려면
다음 명령을 사용한 다음 앱을 다시 스테이징하십시오.

```
    $ cf set-env myapp JVM_ARGS -Xmx512m
```
{: codeblock}

* 애플리케이션이 [서버 디렉토리](optionsForPushing.html#server_directory) 또는 [패키지된 서버](optionsForPushing.html#packaged_server)인 경우
jvm.options 파일에서 -Xmx 인수를 지정할 수 있습니다.

* JBP_CONFIG_IBMJDK 환경 변수를 사용하여 힙 크기 비율을 지정할 수 있습니다. heap_size_ratio는
힙에 할당할 사용 가능한 메모리 양을 지정하는 부동 소수점 값입니다. 예를 들어, 힙에 사용 가능한
메모리의 반을 할당하려면 다음 명령을 실행하고 앱을 다시 스테이징하십시오.

```
    $ cf set-env myapp JBP_CONFIG_IBMJDK "heap_size_ratio: 0.50"
```
{: codeblock}
